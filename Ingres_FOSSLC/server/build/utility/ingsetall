#!/bin/bash
# Copyright (c) 2004 Ingres Corporation
# $Header $
#
# Name:
#	ingsetall
#
# Usage:
#	ingsetall symbol value
#
# Description:
#	This script sets the symbol passed as an argument in the symbol.tbl
# 	for each client.
#
# Exit status:
#	0	ok
#
#  PROGRAM = ingsetall
# -----------------------------------------------------------------

. iisysdep

CMD=ingsetall

if [ $# -ne 2 ]
then
	echo "$CMD: wrong argument count"
	echo "Usage: ingsetall symbol value"
	exit 2
fi

SYM=$1
VALUE=$2

if [ -d $II_SYSTEM/ingres/admin ]
then :
else
	cat << !

$CMD: FATAL ERROR 1 ------------------------------------------------

The directory

	$II_SYSTEM/ingres/admin

does not exist or it is not accessible. This indicates that there are
no client nodes in this installation. Please refer to the Installation
and Operations Guide for information on how to set up a client installation.

!
	exit 1
fi

for i in $II_SYSTEM/ingres/admin/*
do
	if [ -d $i ] 
	then
		node=`echo $i | \
		      awk ' BEGIN { FS = "/" } 
				  { n = NF } 
				  { print $n }'`
		echo ""
		echo "Updating symbol table for node "$node"..."
		echo ""
		eval II_ADMIN=$i ingsetenv $SYM $VALUE
	fi
done

exit 0
